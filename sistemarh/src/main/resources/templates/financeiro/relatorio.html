<!doctype html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Relatório Financeiro</title>
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/financeiro.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<header th:replace="~{layout :: header}"></header>
<main class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>Relatório - Funcionários Ativos</h3>
        <div>
            <button class="btn btn-success">Exportar CSV</button>
            <button class="btn btn-danger">Exportar PDF</button>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th>Funcionário</th>
                <th>Cargo</th>
                <th>Departamento</th>
                <th>Salário Base</th>
                <th>Benefícios</th>
                <th>Descontos</th>
                <th>Salário Líquido</th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${#lists.isEmpty(funcionarios)}">
                <td colspan="7" class="text-center">Nenhum funcionário ativo cadastrado.</td>
            </tr>
            <tr th:each="f : ${funcionarios}">
                <td th:text="${f.nome}"></td>
                <td th:text="${f.cargo}"></td>
                <td th:text="${f.departamento}"></td>
                <td th:text="${'R$ ' + #numbers.formatDecimal(f.baseSalario, 1, 'POINT', 2, 'COMMA')}"></td>

                <th:block th:with="bruto=${f.baseSalario + f.regraSalario.valorValeAlimentacao + f.regraSalario.valorValeTransporte},
                                           liquido=${f.calcularSalario()}">
                    <td th:text="${'R$ ' + #numbers.formatDecimal(bruto - f.baseSalario, 1, 'POINT', 2, 'COMMA')}"></td>
                    <td th:text="${'R$ ' + #numbers.formatDecimal(bruto - liquido, 1, 'POINT', 2, 'COMMA')}"></td>
                    <td th:text="${'R$ ' + #numbers.formatDecimal(liquido, 1, 'POINT', 2, 'COMMA')}"></td>
                </th:block>
            </tr>
            </tbody>
        </table>
    </div>
</main>
<footer th:replace="~{layout :: footer}"></footer>
</body>
</html>